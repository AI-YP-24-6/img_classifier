Краткое руководство по развертыванию вашего приложения на VPS от Cloud.ru и открытию необходимых портов

Для начала зайдите на официальный сайт [Cloud.ru](https://cloud.ru/docs/virtual-machines/ug/topics/guides__create-free-tier-vm.html), чтобы создать новую виртуальную машину (VM). Выберите вариант с бесплатным тарифом (free tier).

Далее нам предложат список предустановленных программных компонентов для вашей новой виртуальной машины. Можете выбрать наиболее подходящие опции в зависимости от ваших потребностей.

Рекомендуется сразу настроить SSH-соединение для более удобного доступа к серверу. После завершения настройки вы сможете подключаться к машине двумя способами: либо напрямую через веб-интерфейс сайта, используя пароль, либо через SSH.

Из списка можем выбрать что будет предустановлено у нас на сервер.



После создания машины мы можем как сразу подключиться к ней через интерфейс сайта по паролю, так и по ssh

    ssh -i ~/.ssh/<cloudru-key> <login>@<ip>

По умолчанию там запускается -sh, которая не очень удобна для работы. Чтобы переключиться на стандартный Bash, выполните команду /bin/bash.



Теперь у нас настроена базовая виртуальная машина, но без доступа к интернету и открытым портам.
Для открытия нужных портов следуйте инструкциям на официальном сайте Cloud.ru. Например, этой: https://cloud.ru/docs/marketplace/ug/services/mind-migrate/mind__subnet-configuration.html#id4.

Не забудем также убедиться, что внутренние брандмауэры на самой виртуальной машине разрешают использование этих портов.
В системе Ubuntu это делается через утилиту UFW, а в других системах – через команды вроде firewall-cmd.

Как проверить работоспособность открытых портов?
Попробуем отправить запрос на 213.171.25.239:54545. Если мы можем получить ответ, значит порт открыт.

Если вы используете Windows, попробуйте выполнить следующую команду:

    Test-NetConnection <ip> -Port 54545

Она выведет результат проверки соединения, например: `TcpTestSucceeded       : False`

Если вы работаете в Linux, воспользуйтесь командой telnet:

    telnet <ip> 54545

Но почему Windows выдает что порт закрыт по протоколу TCP, хотя сам хост отвечает на запросы ICMP (ping).
Это происходит потому, что на данном порте еще нет запущенного приложения, которое могло бы принимать входящие соединения.

Чтобы протестировать работу порта в Linux, вы можете использовать команду netcat (nc) для запуска простого сервера на нужном порте:

    netcat -l 8501


Далее уже можно запускать готовое приложение

    git clone -branch <feature-fastapi>> <progect http url >
    docker compose up -d --build

И теперь на <host ip>:8501 можно будет увидеть готовое приложение
